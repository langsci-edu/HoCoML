---
title: "æŒ‡ä»¤åˆ—æŒ‡ä»¤å‹’"
subtitle: "Command Line for Linguists"  
author: 
  - "è¬èˆ’å‡± "
  - "å°å¤§èªè¨€å­¸ç ”ç©¶æ‰€"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    self_contained: false # if true, fonts will be stored locally
    seal: true # show a title slide with YAML information
    includes:
      in_header: "assets/mathjax-equation-numbers.html"
    nature:
      beforeInit: ["assets/remark-zoom.js", "https://platform.twitter.com/widgets.js"]
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9' # alternatives '16:9' or '4:3' or others e.g. 13:9
      navigation:
        scroll: false # disable slide transitions by scrolling

---



```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width=9, fig.height=3.5, fig.retina=3,
  out.width = "100%",
  cache = FALSE,
  echo = TRUE,
  message = FALSE, 
  warning = FALSE,
  hiline = TRUE
)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  primary_color = "#1381B0",
  secondary_color = "#FF961C",
  inverse_header_color = "#FFFFFF",
  colors = c(
    red = "#f34213",
    purple = "#3e2f5b",
    orange = "#ff8811",
    green = "#136f63",
    white = "#FFFFFF")
  )

# style_mono_accent(
#   base_color = "#1c5253",
#   header_font_google = google_font("Josefin Sans"),
#   text_font_google   = google_font("Montserrat", "300", "300i"),
#   code_font_google   = google_font("Fira Mono")
# )

# style_xaringan()


# library(RefManageR)
# bib = ReadBib("bootcamp.bib")
# BibOptions(
#   check.entries = FALSE,
#   bib.style = "authoryear", 
#   cite.style = "authoryear", 
#   style = "markdown",
#   hyperlink = FALSE, 
#   dashed = FALSE)

```



class: title-slide
background-image: url("assets/gil.logo.png"), url("assets/wanggu.jpg")
background-position: 10% 90%, 100% 50%
background-size: 160px, 100% 100%

# .white[å°ç£å¤§å­¸èªè¨€å­¸ç ”ç©¶æ‰€]
### .white[å¹³æºªæœ›å¤ã€‚é ˜åŸŸæ¨™ç«¿å¾®å‹å·¥ä½œåŠ]





---
# æœ¬å·¥ä½œåŠç›®çš„

- åœ¨ä¼ºæœå™¨ä¸Šï¼Œæˆ–æ˜¯åœ¨ç­†é›»ä¸Šæœ‰æ•ˆç‡çš„ä½¿ç”¨æŒ‡ä»¤åˆ—ï¼Œæ˜¯èªæ–™è¨ˆç®—çš„å…¥é–€æŠ€èƒ½ã€‚

- å¸Œæœ›ç›¸é—œçš„æŠ€èƒ½ï¼Œå¯ä»¥å¢å¼·å¤§å®¶çš„èªè¨€åˆ†æè£å‚™ã€‚


???
speaker's note


---
class: inverse center middle

# é–‹å§‹å›‰



---
## å…ˆå¾åŸºæœ¬æ¦‚å¿µé–‹å§‹

> Why Language Science at the Command Line?


- äº†è§£Unix (and Linux) æ˜¯åµŒå…¥è£ç½®èˆ‡é›²ç«¯ä¼ºæœå™¨å·¥ä½œçš„å¿…é ˆ (Check Raspberry Pi/Amazon EC2)

- `linux` æ˜¯ä½œæ¥­ç³»çµ± (operating system, OS)  çš„ä¸€ç¨®ã€‚é–‹æºï¼Œå¯é ï¼Œé‹è¡Œåœ¨ä¸–ç•Œå¤§éƒ¨åˆ†çš„ä¼ºæœå™¨ä¸Šã€‚

- æŒ‡ä»¤åˆ—å·¥å…·çš„æ„æ€å…¶å¯¦å¾ˆå»£ï¼Œæˆ‘å€‘ç°¡åŒ–åœ¨ç”¨ç³»çµ±æä¾›çš„åŸºæœ¬æŒ‡ä»¤ã€‚

<p align="right">
<img src="./figures/cmd.png" alt="drawing" style="width:350px;"/>
</p>



.footnote[image credit: [J.Janssens](https://datascienceatthecommandline.com/2e/chapter-2-getting-started.html#getting-the-data)]


???
ubuntu çš„ç™¼éŸ³ï¼ˆå—éï¼‰ï¼š how to pronounce Ubuntu?
Ubuntu (Zulu pronunciation: [Ã¹É“ÃºntÊ¼Ã¹]) is a Nguni Bantu term meaning "humanity". It is sometimes translated as "I am because we are" (also "I am because you are"), or "humanity towards others" (in Zulu, umuntu ngumuntu ngabantu).



---
class: inverse center middle

#  å¯ä»¥ç°¡å–®è§£æ±ºçš„ï¼Œå°±ä¸è¦ç”¨è¤‡é›œçš„æ–¹å¼ã€‚


---
## ç™»å…¥èˆ‡ç™»å‡ºï¼ŒæˆåŠŸçš„ä¸€åŠ
### Logging into a Unix-based remote server

- Getting your Username, Password, and Server Address

- using ssh, (short for â€˜secure shellâ€™) 

```{bash, eval=FALSE}
ssh 140.112.147.112
```

- `exit` will close an ssh connection


---
## è¬ä¸€ä¸è¡Œçš„å‚™æ¡ˆ (å¯è·³é)
#### å®‰è£ Docker Image

- A Docker **image** is a bundle of one or more applications together with all their dependencies. 

- A Docker **container** is an isolated environment that runs an image.
(In a way, a Docker container is like a virtual machine, only a Docker container uses far fewer resources).

```bash
# å…ˆä¸‹è¼‰èˆ‡å®‰è£ Dockerï¼Œä¸¦åŸ·è¡Œ
# ä¸‹è¼‰ image
$docker pull datasciencetoolbox/dsatcl2e
# åŸ·è¡Œ
$docker run --rm -it datasciencetoolbox/dsatcl2e
```

æ¸¬è©¦æ˜¯å¦åœ¨ container è£¡é¢

```bash
$cowsay "Let's moove\!"
```







---
## é¦–å…ˆçœ‹åˆ°çš„æ±è¥¿

- **the shell**: ç¿»è­¯å¦³çš„æŒ‡ä»¤çµ¦ç³»çµ±æ ¸å¿ƒçš„ç¨‹å¼ã€‚é€šå¸¸æ˜¯å« **bash**ï¼Œä¹Ÿæœ‰åˆ¥çš„ (å¦‚ *zsh* å·²ç¶“è®Šæˆ MacOS é è¨­,ç­‰ç­‰)


- **the prompt ($)** æç¤ºå­—å…ƒï¼Œå¦³ä¸‹æŒ‡ä»¤çš„åœ°æ–¹ã€‚
  - æ‰“å€‹ `whoami` ï¼Œæˆ–æ˜¯ `cal` ä¾†çœ‹çœ‹


.footnote[å¯ä»¥ç”¨ `echo "$SHELL"` çŸ¥é“ç›®å‰ä½¿ç”¨å“ªç¨®é¡å‹çš„ shell]


---
## ç›®éŒ„å’Œæª”æ¡ˆè™•ç† 1


- æˆ‘å€‘ä¸€é–‹å§‹æœƒè¢«æ”¾åœ¨å°ˆå±¬æ–¼è‡ªå·±çš„å®¶ç›®éŒ„ (HOME directory)ã€‚è€Œå¦³ç›®å‰æ‰€åœ¨çš„è³‡æ–™å¤¾ç¨±ä½œå·¥ä½œç›®éŒ„ (working directory)ã€‚

- æ•´å€‹æª”æ¡ˆç³»çµ±æ˜¯ç”± .green[æ ¹ (root)] é–‹å§‹ï¼Œä¹‹å¾Œæœƒå‘æ¨¹ä¸€æ¨£ä¸æ–·åˆ†æ”¯é•·å‡ºå»

- çŸ¥é“å¦³èº«è™•ä½•è™•ï¼Œé–‹å§‹ç¬¬ä¸€å€‹æŒ‡ä»¤ `pwd` (é¡¯ç¤ºç›®å‰å·¥ä½œç›®éŒ„)ã€‚æ³¨æ„åˆ°æ–œç·š (slash) `/` ç¬¦è™Ÿã€‚
```bash
$pwd
/home/shukai
```

.footnote[ç›®éŒ„å¯ä»¥ç†è§£ç‚ºæª”æ¡ˆå¤¾]

---
## ç›®éŒ„å’Œæª”æ¡ˆè™•ç† 2


- å†ä¾†ï¼Œè¦æœ‰ .green[è·¯å¾‘çš„æ¦‚å¿µ]
  
  - **çµ•å°è·¯å¾‘** æŒ‡çš„æ˜¯å¾æ ¹é–‹å§‹å‡ºç™¼çš„è·¯å¾‘ï¼Œé€™ç¨®è·¯å¾‘ä¸ç®¡ä½ çš„å·¥ä½œç›®éŒ„åœ¨å“ªè£¡éƒ½ä¸æœƒå½±éŸ¿åŸ·è¡Œã€‚`ä¾‹å¦‚: /home/shukai/XD.txt`ã€‚  
  
  - **ç›¸å°è·¯å¾‘** æŒ‡çš„æ˜¯å¾å·¥ä½œç›®éŒ„é–‹å§‹çš„è·¯å¾‘ï¼Œå¦‚æœä½ åœ¨ä¸åŒçš„å·¥ä½œç›®éŒ„ä½¿ç”¨æœƒå¾—åˆ°ä¸åŒçš„æ•ˆæœã€‚

--

- ç”¨ `cd` (æ›´æ›å·¥ä½œç›®éŒ„åˆ°æŒ‡å®šçš„ç›®éŒ„) ä¾†ç·´ç¿’

```bash
# .. è¡¨ç¤ºå¾€ä¸Šä¸€å±¤èµ°
$cd ..

# åˆ‡æ›åˆ°ç•¶å‰ç›®éŒ„ä¸‹çš„shukai ç›®éŒ„ä¸­ï¼Œ . è¡¨ç¤ºç•¶å‰ç›®éŒ„ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ cd shukai
$cd ./shukai

# åˆ‡æ›åˆ°ä¸Šå±¤ç›®éŒ„ä¸­çš„goodç›®éŒ„ä¸­ï¼Œ.. è¡¨ç¤ºä¸Šä¸€å±¤ç›®éŒ„
$cd ../good

# å›å®¶ç›®éŒ„
$cd ~

```


???
pwd + cd
ç†è§£è·¯å¾‘


---
## å¥½ç”¨æŸ¥è©¢å·¥å…·

ä¸æœƒè¿·è·¯ä¹‹å¾Œï¼Œå»ºè­°å®‰è£ `tldr` é€™å€‹å·¥å…·ã€‚

```python
pip install tldr
```

--

- æŒ‡ä»¤çš„åŸ·è¡Œå¼•æ•¸ (flag)
  - ä»¥ `ls`  (åˆ—å‡ºç•¶å‰ç›®éŒ„ä¸‹çš„å…§å®¹)é€™å€‹æŒ‡ä»¤ä¾†èªªï¼Œç”¨ .green[tldr ls] å»çœ‹ç³»çµ±æä¾›çš„ flag.   
  
  - æŒ‡ä»¤çš„å¥æ³•ï¼š.green[command [-flags] [arguments].]
  
```bash  
$ls -la
```
--

- é †ä¾¿äº†è§£ä¸€ä¸‹æ¬Šé™ (permissions) èˆ‡ `chmod`
  - .red[owner, group, other user]
  - .red[read(r), write(w), execute(x)]

---
## ç›®éŒ„å’Œæª”æ¡ˆè™•ç† 3
### å»ºç«‹ã€ç§»å‹•ã€è¤‡è£½èˆ‡åˆªé™¤

- `touch` åœ¨è£¡é¢å»ºç«‹ä¸€å€‹ç©ºç™½æª”æ¡ˆã€‚ä¹‹å¾Œçš„ `vim` èª²ç¨‹å†æ•™å¤§å®¶ç·¨è¼¯æ–‡ä»¶å…§å®¹ã€‚
```bash
touch my.txt
```

- `mkdir` å»ºç«‹ç›®éŒ„

```bash
# åœ¨è‡ªå·±çš„å®¶ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹æ–°æª”æ¡ˆå¤¾ tmp
$mkdir tmp
```

- `cp`  æ‹·è²æª”æ¡ˆåŠç›®éŒ„ (`cp -vi` è¼ƒå®‰å…¨)

- `mv`  .red[ç§»å‹•]æˆ–.red[é‡æ–°å‘½å]æª”æ¡ˆ

- `rm` åˆªé™¤æª”æ¡ˆæˆ–ç›®éŒ„ (`rm -r` æ‰€æœ‰ç›®éŒ„èˆ‡æª”æ¡ˆ < ğŸ¤”ä¸‰æ€è€Œè¡Œï¼)



---
## ç·´ç¿’


> åœ¨ /mnt/hdd/cmd/ ä¸‹æœ‰å€‹ `opening.txt` æª”æ¡ˆ
ä½¿ç”¨ `cp` æŠŠå®ƒè¤‡è£½åˆ°å¦³çš„ç›®éŒ„ä¸‹ï¼Œç„¶å¾Œæ”¹åç‚º `test.txt`ã€‚






---
# ç²—çœ‹æª”æ¡ˆ


- `cat` ä¾æ¨™æº–è¼¸å‡ºé¡¯ç¤ºæª”æ¡ˆå…§å®¹; ä¸²æ¥æª”æ¡ˆ

- `more`ï¼ˆçœ‹æª”æ¡ˆå…§å®¹ï¼Œæ»¿é æš«åœæŒ‰ space éµç¹¼çºŒï¼ŒæŒ‰ q çµæŸï¼‰

- `less`ï¼ˆåŒä¸Šï¼Œä½†å…è¨±æ¸¸æ¨™éµä¸Šä¸‹æ²å‹•å°å…§å®¹é€²è¡Œç€è¦½ï¼‰

```bash
# è©¦çœ‹çœ‹åœ¨ test.txt ä¸Šçš„å·®ç•°
```

---
## è¬ç”¨å­—å…ƒ (The * Wildcard)

- å¯ä»¥ä½¿ç”¨ * ä¾†ä»£è¡¨è¨±å¤šæª”æ¡ˆã€‚
  - å¯¦é©—ä¸Šï¼Œæˆ‘å€‘å¸¸éœ€è¦æ‰¹æ¬¡åœ°å»ºç«‹åå­—é¡ä¼¼çš„ç©ºç™½æª”æ¡ˆæˆ–ç›®éŒ„ï¼Œå¦‚ `file0.txt,file1.txt ... file9.txt`ã€‚

```bash
$touch file{0..9}.txt
```
  - æˆ–æ˜¯

```bash
mkdir wavdir && mv *.wav wavdir
```



---
## è¬ç”¨å­—å…ƒ


- åˆªé™¤ (æé†’ï¼šUnix has no â€˜undoâ€™)

```bash
$rm -rf file{0..9}.txt

# è¦ä¸‰æ€è€Œè¡Œçš„ä½¿ç”¨ï¼
rm -r *
```


---
## å…¶ä»–ä½¿ç”¨è¨£ç«…

- Tab Autocomplete

- ç”¨ä¸Šä¸‹éµä¾†æ‰¾æŒ‡ä»¤å² (Command History)

- `Ctrl+c` kill the process and return to a prompt.


---
## è¼¸å…¥è¼¸å‡ºã€é‡å°èˆ‡ç®¡ç·š

- æŒ‡ä»¤åˆ—çš„å“²å­¸ï¼šæ¯å€‹å·¥å…·æ‡‰è©² do one specific taskã€‚æ ¹æ“šä¸åŒéœ€è¦åœ¨çµåˆèµ·ä¾†æˆç‚ºæ›´å½ˆæ€§èˆ‡å¼·å¤§çš„å·¥å…·ã€‚å¦‚ä½•çµåˆï¼Ÿé™¤äº†å¯« `bash` **scripts**ï¼Œ æˆ–æ˜¯åˆ©ç”¨ **pipes** ï¼

- æœ‰å¹¾å€‹é‹ç®—å­ 
  - `<`  â€˜Use this file as inputâ€™ ç•¶è¼¸å…¥æº
  - `>`  â€˜Redirect the output to a fileâ€™ å­˜åˆ°
  - `>>`  â€˜Append the output to a fileâ€™  æ–°å¢åˆ°

```bash
$ls -l /usr/bin > ls-output.txt

# å°‡è¼¸å‡ºåŠ åœ¨åŸæœ‰æª”æ¡ˆå¾Œé¢
$ls -l /usr/bin >> ls-output.txt
```

---
## ç®¡ç·š

- `|` è¼¸é€å‘½ä»¤çš„æ¨™æº–è¼¸å‡ºåˆ°å…¶ä»–æ¨™æº–è¼¸å…¥ã€‚(.green[ä½ çš„ output å°±æ˜¯æˆ‘çš„ input])

```bash
$ls -l /usr/bin | less
```

- `||` è¡¨ç¤ºç¬¬ä¸€é“æŒ‡ä»¤åŸ·è¡Œå¤±æ•—å¾Œ, æ‰æœƒåŸ·è¡Œç¬¬äºŒé“

```bash
cat notafile.txt || echo â€œfailâ€
```

---
## åŸ·è¡Œå¤šé‡æŒ‡ä»¤çš„é‹ç®—å­ (operator)

-  `&` ï¼šåœ¨èƒŒæ™¯åŸ·è¡Œ (é€²éšä½¿ç”¨è€…å¯ä»¥è€ƒæ…® `screen` æŒ‡ä»¤)

So, if you want to run a long task (e.g. find and list every file on the hard drive containing â€œtwi_â€), but didnâ€™t want your terminal frozen while it runs, you would run

```bash
$find / -name "twi_" -ls > twifiles.txt &
```
where the final & just says â€˜Run this, and let me know when it finishesâ€™.


- `&&` : å³ç¬¬ä¸€é“æŒ‡ä»¤åŸ·è¡ŒæˆåŠŸå¾Œ, æ‰æœƒåŸ·è¡Œç¬¬äºŒé“æŒ‡ä»¤ã€‚

```bash
$mkdir txtfiles && mv subfolder/*.txt txtfiles && rm -r subfolder
```
will create a new folder called â€˜txtfilesâ€™, move all the text files out of a subfolder into it, then remove that subfolder.

---
class: inverse center middle

# æ–¹ä¾¿æ–‡æœ¬è™•ç†çš„æŒ‡ä»¤å€‘




---
## ç´°çœ‹

- `head`

```bash
$head -n 3 test.txt
```
- tail

- `wc` ï¼ˆè¨ˆç®—å­—æ•¸ã€è¡Œæ•¸ã€å­—å…ƒæ•¸ï¼‰

```bash
$wc test.txt
$wc -l test.txt
```



---
## grep/egrep
#### `grep` + `regex` = `egrep`

> `grep [-acinv] [â€“color=auto] â€˜æŸ¥è©¢å­—ä¸²â€™ filename`

- `grep -n` will print the line numbers of the matching lines (along with the matching lines)

- grep: å¯ä»¥åˆ©ç”¨**æ­£å‰‡è¡¨ç¤ºæ³•** ä¾†æœå°‹æ–‡æœ¬ä¸­çš„ç‰¹å®šæ¨¡å¼ã€‚æœ‰è¨±å¤šåƒæ•¸å¯è¨­å®šã€‚

```bash
$grep -i -A 1 -B 10  work mydata.csv | head -n 5

# çµåˆç®¡ç·š
$ls /bin | sort | uniq | grep zsh
```





---
## æ–‡æª”è™•ç†

- `sort` â€˜sort the file by contentsâ€™

- `uniq` (ç§»é™¤é‡è¤‡ï¼Œå¸¸å’Œ sort é€£ç”¨ã€‚åƒæ•¸ -d å¯ä»¥çœ‹é‡è¤‡çš„å…§å®¹æ¸…å–®)

```bash
$ls /bin /usr/bin | sort | uniq | less
```





---
## æ–‡æª”è™•ç†

- `cut` (ç”¨ä¾†æŠ½å–æ–‡æœ¬ä¸­æŒ‡å®šçš„ columns/characters)
  * -c: Will specify the filtering of characters
  * -d: Will specify the delimiter for fields
  * -f: Will specify the field number

```bash
#used the â€“d: option to specify that the field or columns are separated by a colon (:)
$cut -d: -f 1,3 /etc/passwd
# celex é‚„æ˜¯ç”¨ deeplex sample
$head tc_celex.txt 
$cut -f2 tc_celex.txt | head
```

- `paste` åˆä½µæª”æ¡ˆè¡Œåˆ— Merge lines of files.ã€‚paste two files horizontally, such as file1, which will become the first column and file2 will become the second column

```bash
$paste file_1 file_2
```
???
â€˜Extract a delimited columnâ€™

---
## æ–‡æª”è™•ç†

- `sed` å¯ç”¨ä¾†æœå°‹èˆ‡å–ä»£ (find and replace)
  - `$sed 's/oldtext/newtext/g' inputfile.txt.`
  - sed is also perfectly happy to take regular expressions,

```bash
$sed -e 's/love/æ„›/g' test.txt > test.txt
```

- `tr` â€˜translate charactersâ€™

```bash
#transform spaces into newlines (putting each word onto a line)

$tr ' ' '\n' < test.txt
```






---
class: inverse center middle

## ç”¨ linux æŒ‡ä»¤åšæ–‡æœ¬è³‡æ–™ç§‘å­¸åˆ†æ: 
### æŠ“å–ã€æ¸…ç†ã€æ¢ç´¢ã€å»ºæ¨¡ 



---
## ä¾†ç·´ç¿’

ã€1ã€‘. å»ºç«‹ç›®éŒ„ `~/home/YOURNAME/data`

ã€2ã€‘. æŠ“ Charles Dickens çš„ Oliver Twist (`http://www.gutenberg.org/cache/epub/730/pg730.txt`) ä¸Ÿåˆ°é€™å€‹ç›®éŒ„ï¼Œæ”¹æª”æ¡ˆåå­—ç‚º `dickens.txt`

ã€3ã€‘. ç§»é™¤æ–‡æœ¬ä¸­çš„ header åŠ footerï¼Œå­˜æˆ `dickens-clean.txt`

--
```bash
curl -s http://www.gutenberg.org/cache/epub/730/pg730.txt -o dickens.txt
less -N dickens.txt
# åˆ©ç”¨ G å’Œä¸Šä¸‹é éµ
sed '1,150d' dickens.txt > dickens-noheader.txt
sed '18682,19052d' dickens-noheader.txt > dickens-clean.txt
```

.footnote[è€ç‰Œåƒè€ƒè³‡æºï¼š [é³¥å“¥çš„ linux ç§æˆ¿èœ](http://linux.vbird.org/linux_basic/0220filemanager.php#less)]



---
## å†å¤šç·´ç¿’ä¸€ä¸‹

ã€4ã€‘. å…¨éƒ¨å»æ¨™é»å»æ•¸å­—å»ç©ºç™½ï¼Œä¸¦æ”¹æˆå°å¯«ä¹‹å¾Œå»ºç«‹è©é »è¡¨

ã€5ã€‘. é€™å€‹è©é »è¡¨ä¸­æœ‰ä¸€å€‹è©å½™ `bumble` å¸å¼•äº†æˆ‘å€‘çš„ç›®å…‰ï¼Œè«‹ç”¨ `grep` æŒ‡ä»¤åˆ—å‡ºåœ¨å®ƒ `dickens-clean.txt`æ‰€åœ¨çš„åœ°æ–¹ï¼ˆé †ä¾¿åŠ ä¸Šè¡Œæ•¸ï¼Œèˆ‡çµ¦å®ƒé»é¡è‰²ï¼‰

--

```{bash,eval=FALSE}
tr -d [:punct:] < dickens-clean.txt | tr -d [:digit:] | 
tr [:upper:] [:lower:] | tr -d '\r'| tr ' ' '\n' | sort | uniq -c | 
sort -r -g > dickens-wordfreq.txt
grep -E -n --color=auto "(B|b)umble" dickens-clean.txt
```



---
# ç¾åœ¨æ›å¦³ä¾†

[Lewis Carroll, Alice's Adventures in Wonderland](http://www.gutenberg.org/cache/epub/28885/pg28885.txt)

## æŠ“æª”

--

```{bash,eval=FALSE}
wget http://www.gutenberg.org/cache/epub/28885/pg28885.txt
## alternatively
curl -s http://www.gutenberg.org/cache/epub/28885/pg28885.txt -o alice.txt

file pg28885.txt
cp pg28885.txt alice.txt
head -n 20 alice.txt
less -N alice.txt
```

---
# æ¸…ç†ã€è™•ç†èˆ‡æ¢ç´¢

- Trimming the header and footer

```{bash,eval=FALSE}
sed '1,216d' alice.txt > alice-noheader.txt
sed '3422,3830d' alice-noheader.txt > alice-trimmed.txt
```

--
- Counting and Finding 

```{bash,eval=FALSE}
wc alice-trimmed.txt
grep " CHAPTER" alice-trimmed.txt
grep -n "Rabbit" alice-trimmed.txt
grep -E -n "(W|w)hite" alice-trimmed.txt
```



---
# æ¸…ç†ã€è™•ç†èˆ‡æ¢ç´¢

- Standardizing the text

```{bash,eval=FALSE}
tr -d [:punct:] < alice-trimmed.txt > alice-nopunct.txt
tr [:upper:] [:lower:] < alice-nopunct.txt > alice-lowercase.txt
tr -d '\r' < alice-lowercase.txt > alice-lowercaself.txt
```

--

- Counting word frequencies more seriously!

```{bash,eval=FALSE}
tr ' ' '\n' < alice-lowercaself.txt > alice-oneword.txt
sort alice-oneword.txt > alice-onewordsort.txt
uniq -c alice-onewordsort.txt > alice-wordfreq.txt
```

---
# ç¶œåˆ

- Pipelining everything 

```{bash,eval=FALSE}
tr ' ' '\n' < alice-lowercaself.txt | sort | uniq -c > alice-wordfreq2.txt
tr '[:punct:]' ' ' < alice-nofooter.txt | tr '[:upper:]' '[:lower:]' | tr '[:blank:]' ' ' |
sort | uniq -c | sed 's/ \{1,\}/","/g' | sed 's/^",//g' | sed 's/$/"/g'
w3m -dump http://www.gnu.org/gnu/manifesto.html | wc
```



---
## Convert one-liners into parameterized shell scripts






---
## ä¸­æ–‡æ–‡æœ¬åˆ°è©é »è¡¨çš„ç®¡ç·šè™•ç† pipeline
#### Turn existing Python and R code into reusable command-line tools 


- å»ºç«‹ä¸€å€‹ jieba.Rï¼Œæ”¾åˆ°è™•ç†è³‡æ–™çš„ç›®éŒ„ä¸‹

```{r, eval=FALSE}
# thanks to simon
library(jiebaR)
txt = scan('stdin', what = 'char')
words_vector = worker() <= txt
words_char = paste(words_vector, collapse = ' ')
cat(words_char)
```

- æ¸¬ä¸€ä¸‹é­¯è¿…

```{bash,eval=FALSE}
curl -s http://www.gutenberg.org/files/27166/27166-0.txt -o luxun.txt
cat luxun.txt | Rscript jieba.R | tr ' ' '\n' | sort | uniq -c -g | sort -r > luxun-wordfreq.txt
```



---
## ä½ ä¸ R ä½ è¦ Py ä¹‹ç·´ç¿’


```bash

```



---
class: inverse center middle

# Shell scripting


```shell
#!/bin/bash
# Clear the screen
clear
```


---
## awk




---
class: inverse center middle

# Non-textual data


---
## èªéŸ³èˆ‡è¦–é »

- `youtube-dl` - download videos from youtube.com or other video platforms

- `ffmpeg` - Audio and Video conversion tool

- `imagemagick` - Image processing tool




---
class: center, middle

# Thanks!




